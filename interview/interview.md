
##面试总结和整理

###1、北京银行一面


1.我看你了解spring cloud的几大组件儿，能说一下你对哪个组件儿了解的比较多吗？我说了eureka，ribbon，feign都还算了解。说了eureka的作用还有一些实现机制（有点魔怔，就想硬刚eureka），优化策略等等

2.zuul组件儿用的是什么？你们用的路由器还是过滤器？
这个一时没复习，没想起来。

3.feign调用请求调用和正常的http请求区别在哪儿？能解释一下他的原理吗？其实就是想问，你知不知道feign底层请求调用的机制是什么。

4.我看你对cap的理论基础了解一下，你能说说zookeeper是保证的是啥特性吗？我说的是不太了解zookeeper，只是比较了解它实现的分布式锁，最后思考了一下，说保证了可用性和分区容错性？那eureka呢保证了什么？保证的其实也是ap，可用性和分区容错性，一致性是没有保证的。

5.用过redis的分布式锁吗？能不能说说一个redis分布式锁的加锁流程？
从集群构建redisson+get锁，到锁执行流程的lua脚本，构建一个锁的hash结构，重入的锁的一个hash里面的key，借助incrby来做重入。watchdog的监听机制，后台线程刷新锁生存时间的机制说了一遍。

6.分布式公平锁呢？能讲一下吗？（这个一下子没想起来，面试最后，我说弥补一下，把这个问题回答了）
加锁的核心机制和上述机制相同，只不过，需要通过一个队列去排队，并且会有一个超时时间的set集合，放它的超时时间的毫秒数值。然后也是后台的watchdog来做的自动更新剩余时间，自动排队，并且说了排队机制可能在某个场景下出现重新排序的情况。

7.redis的RDB和AOF的机制能说一下吗？有哪些数据结构？Hash结构式什么样的？和Java的Hash有什么不一样？
从内存快照和日志指令文件，到他们的数据完整性（fsync的这个东西也说到了，一个缺1s数据，一个缺几分钟数据），到他们在重启恢复数据的场景中的作用做了整个的回答。

8.说一下JVM的吧，JVM的内存模型是什么样子的？（几个分区，存的什么东西）

9.新创建一个对象，会进入哪个区？一定会进入新生代，eden区吗？

10.栈内存存的是什么？局部变量表，栈帧，常量池等

11.你为啥要离职？

13.有啥想问我的吗？

###2、北京银行二面

1.介绍一下你做的比较有挑战性的项目？
三级缓存架构详细说了一遍，就是按照我自己画的那个图。

2.我看你这边儿也用过分布式事务是吧，分布式事务的几种模型说一下？你们是从0到1搭建，还是改造？
用过。分布式事务模型，我没太总结过。
不过分布式事务我们这边引入的是ByteTCC框架，模式是try confirm cancel。其他的分布式事务，还包括seata，saga分布式事务，以及最终一致性分布式事务和最大努力通知分布式事务（如果要提到其他的最好有大致了解过，不然容易入坑）
并且把上下游服务放在一个分布式事务，下游服务放在一个分布式事务，中间用消息投递，第三方短信用最大努力通知这整个分布式事务架构讲了一遍。
说的是把spring的事务拆分成分布式事务，bytetcc的调用链+接口一分为3说了一遍。

3.你刚才说ehchache做了降级处理？有没有做过前端的降级或者限流机制？
（1）前端的静态化页面，把大量请求留在nginx层
（2）按钮置灰，也就是1s后可以再次点击；
问：这种方式有没有什么具体的策略？答：前端的不太了解了。（可能是想问，动态URL，或者置灰和恢复的动态方案）
问：也就是说，是牺牲了一些前端体验做的前端限流是吧？答：是的。（这个时候大方承认就好了）
（3）前端遮罩效果等待结果返回；

4.有没有其他的限流机制，或者你做的限流机制？
答：借助sc的hystrix组件儿，做线程池参数的调整，根据服务请求的平均返回时间考虑设置等待时长。根据服务的访问量，设置参数和fallback逻辑，fallback逻辑里面用JVM内存的参数（把前面的三级缓存架构连起来）

5.你这个是借助了组件儿的功能做的，还有没有其他的限流方案？（最开始没想起来，面试官主动说，比如MQ？）
答：可以借助MQ来实现削峰，比如我把上游的分布式事务，解耦开，通过异步消息的方式来削峰（强调了这个属于削峰的范畴了，削弱一下前面没想起来怎么做的不好的影响），这个时候，可以在前端做一个等待确认的页面，等到分布式事务的两步都完成了，让他确认这个申报信息。

也就是说：前端分两步，第一步申报，第二步等待确认，后端分三步，第一步申报，第二步发消息，第三步消费消息扣额度，返回前端结果

6.为什么离职？你的未来的职业规划？

7.有什么想问我的？
（1）用的什么技术栈？
spring cloud dubbo  mq都用

（2）如果入职的话，会不会有岗前培训？因为问了好几家公司，他们都说的是，急招，进去就要直接上手。我个人理解，如果没有对业务和技术栈有基本的了解的话，做事儿很容易出问题。所以比较在意有没有岗前培训什么的？
回答：正常的入职流程和公司情况是有的培训的。单纯的技术是没有的，不过我们这边儿不会上来就直接丢一堆活就让干，肯定是慢慢来的。

###3、微盟一面


1.自我介绍，继续刚三级缓存架构。
缓存架构那一套。包括数据同步，具体存了什么数据，怎么监控的，怎么同步的，同步时效性，以及为什么可以容忍这个时效性，讲了一遍。

2.针对缓存集群，你们是怎么选择的？为啥要这么选？中间因为什么要做集群架构改变？redis的数据迁移是怎么搞的？
（1）最开始选择主从+sential，后面用户量上来了，就换成了redis cluster。（讲了redis master-slave架构的空间性能问题）最后做数据迁移，RDB，AOF，的特点，迁移用的RDB，然后重新分片，重新进行主从同步；

3.我看你用过分布式事务和分布式锁？你能讲讲这个reddisson框架你怎么用的，你对他有怎么样的了解？
讲了分布式锁的使用场景，redisson分布式锁，到底是怎么创建锁，锁互斥，延长时间，重入的。

4.我看你也了解zookeeper的锁，它是怎么做的？和redssion的分布式锁有啥优缺点？
这个架构都讲过。

5.看你对mysql也有一定的实战经验，你sql建立索引，是怎么考虑的？
（1）开发的时候不创建，开发过程中，对查询比较多的，按照顺序和频率分析之后建索引；
（2）对一些常用的查询字段做分析，比如日期查询10条，地域查10000条，那么就选择日期做索引；

6.有一个联合索引，a,b,c，我where加了b,c,条件，会走索引吗？
分析原因，索引顺序，索引数据的排序规则，索引怎么查的（二分法）

7.如果a是一个范围查询呢？会不会走？
跟上面是同样的逻辑。

8.对JVM也有所了解是吧？能说说你了解的JVM算法吗？他们对JVM内存分代来说，哪种更适合新生代，哪种更适合老年代？
专栏就有。标记复制算法，标记整理算法。分别针对老年代，新生代的对象特点，存活对象数量来分析。

9.redis缓存穿透缓存雪崩，你们项目里面是怎么解决的？有没有深入分析一下原因？有没有更好的措施去解决这个问题？布隆过滤器具体怎么用的？redis本身的还是框架带的？

10.cas了解吗？说一下逻辑？有什么问题（ABA）怎么解决？实际项目中怎么用的？（用了Atomic原子类对象，说了本来的想法准备用cmap，后来因为xxx原因选择的Atomic对象）

11.有什么想问我的？

评价一下我这次的优劣势？

你们的技术栈以及业务线，还有我的技术匹配度？


###
###
###
###
###